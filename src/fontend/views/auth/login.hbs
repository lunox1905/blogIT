<link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Andika&family=Poppins:wght@200;300;400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/app.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
	<link rel="preconnect" href="https://fonts.gstatic.com">
    
    <script src="/js/validator.js"></script>

<link rel="stylesheet" href="/css/auth.css">
<div class="container-auth">
    <form id="loginform" method="POST" action="/login" accept-charset="utf-8">

        <h1>Đăng nhập</h1>
        <div class="err-server">
            <span class="err-mess"></span>
        </div>
        <div class="form-group">
            <label for='email' class="form-label">Email</label>

            <input class="btn-input" name='email' id='email' type="text" placeholder="VD: email@domain.com">

            <span class="form-message"></span>

        </div>

        
        <div class="form-group">
            <label for='password' class="form-label">Password</label>

            <input class="btn-input" name='password' id='password' type="password">

            <span class="form-message"></span>
        </div>
        
        <div class="action">
            <div>
                <input type="checkbox">
                <span>Nhớ mật khẩu</span>
            </div>
            <a href="">Quên mật khẩu</a>
        </div>
        
        <button type="submit" class="btn" id="btn">Đăng nhập</button>
        <div class="box-action">
            Chưa có tài khoản? 
            <a href="/register">Đăng kí</a>
        
        </div>
                    
                 
    </div>          
    
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-latest.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
    Validator({
        form: '#loginform',
        formGroup: '.form-group',
        errorSelector: '.form-message',
        rules: [
            Validator.isRequired("#email", 'Vui lòng nhập email'),
            Validator.isEmail('#email', 'Email không hợp lệ'),
            Validator.minLength("#password", 6, 'Password phải lớn hơn 5 ký tự'),
            
        ],
        onSubmit: function (data) {
            
                    $.ajax({
                        type: 'POST',
                        url: '/login',
                        data: ({email: data.email, 
                        password: data.password}), 
                        success: function(data){
                            console.log('d');
                            if(data.mess == 'err'){
                                document.querySelector('.err-mess').innerHTML = "Mật khẩu or email không chính xác"
                            } else {
                                location.replace('/sharing')
                            }
                        },
                        error: function(err) {
                            console.log(err)
                        }
                    
                })
             
        }
    })
    })
</script>